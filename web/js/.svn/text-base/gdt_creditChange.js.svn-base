//变更操作
function doChangeCredit(obj){
	
	var tr = nstc.sf.findParent(obj, "TR");
	var contractId = $(tr).find("input[id$='.contractId']").val();
	var amountId = $(tr).find("input[id$='.amountId']").val();
	//add by yujin 20180808 start
	//授信占用变更是否在流程中需要拿融资合同id和授信合同id做双重校验，避免融资占多个授信的场景在授信占用出现数据遗失
	var occupyId = $(tr).find("input[id$='.occupyId']").val();
	//add by yujin 20180808 end
	
	//校验状态是否为已生效状态
	var data = validateContractState(contractId);
	if(data != null && data != ''){
		alert(data)
		return;
	}
	
	//校验是否在工作流中
	var result = validateInFlow('GDEBIT_FM004',contractId,occupyId);
	if(result != '' && result != null && result != undefined){
		alert(result);
		return;
	}
	
	var bussVariety = $(tr).find("input[id$='.bussVariety']").val();
	var occupyId = $(tr).find("input[id$='.occupyId']").val();
	var url = 'GDEBIT@gdt_creditChangeInput.sf?m=e&occupyId=' 
		+ occupyId + "&contractId=" + contractId;;
	openwin(url,'授信占用变更录入', 1200, 600);
}


//查看授信合同
function showCredit(obj){
	var tr = nstc.sf.findParent(obj, "TR");
	var creditContractId = $(tr).find("input[id$='.creditContractId']").val();
	var url = 'CLMS-Web@clms_creditContractEntry.sf?m=v&contractId=' + creditContractId;
	openwin(url, '授信合同详情', 900, 600);
}

//待处理记录
function showCreditWait(){
	var url = 'GDEBIT@gdt_creditChangeWait.sf';
	location.href=url;
}