$(function(){
	var div = $("div[id$='_log']")[0];
	var logId = $("[id$='gdt_log.titleId']")[0];
	if(div != undefined && div != null){
		div.style.display = 'none';
	}
	if(logId != undefined && logId != null){
		logId.innerHTML = "提款到账日志" ;
	}
});
function setParPlanNo(obj) {
	$("input[id$='associateNo']").val(obj.associateNo);
	$("select[id$='currencyNo']").val(obj.currencyNo);
	
	var fetchApplyId = $("input[id$='fetchApplyId']").val();
	
	if (fetchApplyId == '') {
		$("input[id$='arriAcntAmount']").val(obj.fetchAmount);
	}
}
function saveFetchRegister(obj,handleFlag) {
	var bussVariety = $("select[id$='_con.bussVariety']").val();
	var issueMethod = $("input[id$='_con.issueMethod']").val();
	
	var isValiEndDate = true;
	if (bussVariety == 'CLMS02' && issueMethod == '8') {
		isValiEndDate = false;
	}
	
	$("input[id$='isApprove']").val(handleFlag);
	//实际到账金额应该小于等于该币种下该金融机构的金额
	
	var hideContractAmt = $("input[id$='hideContractAmt']").val().replace(/,/g,'');
	if (hideContractAmt　!= '' && hideContractAmt != undefined) {
		if (FloatSub(arriAcntAmount, hideContractAmt) > 0) {
			alert('实际到账金额应该小于等于合同金额');
			return;
		}
	}
	//附件验证
	if(!attachUploadValidate()){
		return;
	}
	if(!checkFileUploadControl("010")){
		return;
	}
	var arriAcntDate = $('input[id$=.arriAcntDate]').val();
	
	if (!valiPayInterestDate(arriAcntDate)) {
		return;
	}
	if (!validateFinanceTerms(arriAcntDate)) {
		return;
	}
	
	//校验合同金额下，当前录入的提款金额是否合理
	var arriAcntAmount = $("input[id$='arriAcntAmount']").val().excludeNotNumericDot();
	
	if (!valiFetchAmount(arriAcntAmount)) {
		return;
	}
	
	smartForm_doSubmit(obj);
}

function checkArriAcntDate(){
	var arriAcntDate = $("[id$='gdt_addFetchMoneyReg_f.arriAcntDate']");
	var startDate = $("[id$='gdt_addFetchMoneyReg_amt.startDate']").val();
	var endDate = $("[id$='gdt_addFetchMoneyReg_amt.endDate']").val();
	var currencyDate = new Date();
	if(!compareDate(startDate,arriAcntDate.val(),"到账日期应大于等于合同开始日")){
		arriAcntDate.val("");
	}
//	if(!compareDate(arriAcntDate.val(),endDate,"到账日期应小于等于合同到期日")){
//		arriAcntDate.val("");
//	}
	if(!compareDate(arriAcntDate.val(),currencyDate,"到账日期应小于等于当前日")){
		arriAcntDate.val("");
	}
	setDueDate();
}