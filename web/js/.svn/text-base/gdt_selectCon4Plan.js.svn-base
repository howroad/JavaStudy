//选择合同 
$(function (){
	//动态显示授信品种
	var bussClass= $('select[id$=_qry.bussClass]').get(0);
	var bussVariety=$('select[id$=_qry.bussVariety]').get(0);
	var busFlag=$('[id$=_qry.busFlag]').val();
	queryBussVares(bussClass,bussVariety,busFlag);
})
//选择金融合作网点
function selectAssBank(){
	var url = "GDEBIT@gdt_associateBankSlt.sf?isClear=1";
	openwin(url, '金融合作网点列表', 900, 500);
}

//选择 -- 金融合作网点
function setAssBank(obj){
	var assBankId= obj.assBankId;
	var assBankName= obj.assBankName;
	$("input[id$='_qry.assBankName']").val(assBankName);
	$("input[id$='_qry.assBankId']").val(assBankId);
}

function doQuery(obj){
	var minAmount = $('input[id$=.minAmount]').val();
	var maxAmount = $('input[id$=.maxAmount]').val();
	if(!compareAmount(minAmount, maxAmount, '合同金额范围不合理')){
		return;
	} 
	
	var minsDate = $('input[id$=_qry.minStartDate]').val();
	var maxsDate = $('input[id$=_qry.maxStartDate]').val();
	if(!compareDate(minsDate, maxsDate, '开始日期范围不合理')){
		return;
	}
	
	var mineDate = $('input[id$=_qry.minEndDate]').val();
	var maxeDate = $('input[id$=_qry.maxEndDate]').val();
	if(!compareDate(mineDate, maxeDate, '到期日期范围不合理')){
		return;
	}
	
	smartForm_doRefresh(obj);
}

function selectContractToBack(obj) {
	var tr = $(obj).parents("tr").first();
	var bussClass = tr.find("input[id$='.bussClass']").val();
	var bussVariety = tr.find("input[id$='.bussVariety']").val();
	var contractNo = tr.find("input[id$='.contractNo']").val();
	var contractId = tr.find("input[id$='.contractId']").val();
	var cltNo = tr.find("input[id$='.cltNo']").val();
	var cltName = tr.find("input[id$='.cltName']").val();
	var startDate = tr.find("input[id$='.startDate']").val();
	var endDate = tr.find("input[id$='.endDate']").val();

	var data = {};
	data.bussClass = bussClass;
	data.bussVariety = bussVariety;
	data.contractNo = contractNo;
	data.contractId = contractId;
	data.cltNo = cltNo;
	data.cltName = cltName;
	data.startDate = startDate;
	data.endDate = endDate;
	
	/*top.Layer.getWin().setContractInfo(data);*/
	top.Layer.getWin().setContractInfo(data);
	windowClose();
}