
var swidth = window.screen.width;
var sheight = window.screen.height;

function getdurachart(obj){
	var sumArray=new Array();
	var nameArray=new Array();
	var leg=new Array();
	var date=$("[id$='years']").val();
	if(date==null&&date==""){
		alert('请选择正确的年份！');
	}else{
	$.ajax({
		type : 'POST',
		url : "GDEBIT@AjaxDebtDuration.sf",
		async : false,
		data : {
			"date" : date
		},
		dataType : "json",
		success : function(da) {
			 for(var i=0;i<da.length;i++){
			sumArray[i]=da[i].sum;
			 nameArray[i]=da[i].year;
			leg[i] = {
					value : da[i].sum,
					name : da[i].year
				};
			 }
		}
	});
	
	// add一个图形的div
	var div = document.getElementById('gdt_debt_duration_chart.content');
	div.innerHTML = '<div style="border-width:1px 1px 0 1px;border-color:#C8C8C8;border-style:solid;height:40px;">'

	+'<div style="border-width:0 1px 1px 1px;border-color:#C8C8C8;border-style:solid;height:700px">'
	+'<div id="mainPie" style="width:'+swidth*0.42+'px;height:400px;">'
	+'</div>'
	+'</div>';

	var option = {
		    title: {
		        text: '债务久期（年）',
		        x:'center'	
		    },
		    xAxis: {
		        type: 'category',
		        boundaryGap: false,
		        data :nameArray
		    },
		    yAxis: {
		        type: 'value'
		    },
		    series: [{
		    	data:sumArray,
		        type: 'line',
	            label: {
	                normal: {
	                    show: true,
	                    position: 'top'
	                }
	            }
		    }]
		};
	var myPieChart = echarts.init(document.getElementById('mainPie'));
	myPieChart.setOption(option);
	}
} 	