$(function(){
	var div = document.getElementById('gdt_bondDue_trend_img.content');
	div.innerHTML = '<div id="mainBar" style="width:100%;height:500px;"></div>';
	var myBarChart = echarts.init(document.getElementById('mainBar'));
	var cltName = $("input[id$=cltName]").val();
	var xData = [];
	var shortData = [];
	var domesticData = [];
	var overseasData = [];
	var exchangeData = [];
	$.ajax({
		type: 'POST',
		url: "GDEBIT@QueryBondDueTrendAction.sf",
		async : false,
		data: {'cltName' : cltName},
		dataType:'json',
		success: function(data) {
			if (data.length > 0) {
				for (var i = 0; i < data.length; i++) {
					xData[i] = {
									value:data[i].endDate,
					                textStyle:{
					                    fontSize:'10'
					                    	}
								};
					shortData[i] = data[i].shortFinancing;
					domesticData[i] = data[i].domesticLongBond;
					overseasData[i] = data[i].overseasLongBond;
					exchangeData[i] = data[i].overseasExchangeBond;
				}
			}
		}
	});
	var optionBar = {
			title: {
		        text: '集团公司债务融资工具到期情况趋势图（单位：亿元）',
		        x:'center',
		        y: '25'
		    },
			tooltip : {
		        trigger: 'axis',
		        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
		            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
		        }
		    },
		    legend: {
		    	left:'10',
		        data: ['（超）短融到期', '境内长债到期','境外长债到期','境外可交换债']
		    },
		    grid: {
		        x: '10',
		        y:'80',
		        width:'800',
		        height:'400',
		        containLabel: true
		    },
		    xAxis:  {
		        type: 'category',
		        axisLabel:{
		            interval:'0'  
		        }
		    },
		    yAxis: {
		        type: 'value',
		        minInterval: '100',
		        maxInterval: '100'
		    },
		    series: [
		        {
		            name: '（超）短融到期',
		            type: 'bar',
		            stack: '总量',
		            barWidth:'30'
		            /*label: {
		                normal: {
		                    show: true,
		                    formatter : "{c}",
                            textStyle : {
                                color: '#000000'
                            }
		                }
		            }*/
		        },
		        {
		            name: '境内长债到期',
		            type: 'bar',
		            stack: '总量'
		            /*label: {
		                normal: {
		                    show: true,
		                    formatter : "{c}",
                            textStyle : {
                                color: '#000000'
                            }
		                }
		            }*/
		        },
		        {
		            name: '境外长债到期',
		            type: 'bar',
		            stack: '总量'
		            /*label: {
		                normal: {
		                    show: true,
		                    formatter : "{c}",
                            textStyle : {
                                color: '#000000'
                            }
		                }
		            }*/
		        },
		        {
		            name: '境外可交换债',
		            type: 'bar',
		            stack: '总量'
		            /*label: {
		                normal: {
		                    show: true,
		                    formatter : "{c}",
                            textStyle : {
                                color: '#000000'
                            }
		                }
		            }*/
		        }
		    ]
	};
	optionBar.xAxis.data = xData;
	optionBar.series[0].data = shortData;
	optionBar.series[1].data = domesticData;
	optionBar.series[2].data = overseasData;
	optionBar.series[3].data = exchangeData;
	myBarChart.setOption(optionBar);
});